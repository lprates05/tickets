<!-- app/views/events/index.html.erb -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>All Events</h2>
  <%= link_to "Create Event", new_event_path, class: "btn btn-primary" %>
</div>

<div style="display: flex; flex-wrap: wrap; gap: 2rem;">
  <% @events.each do |event| %>
    <div style="border: 1px solid #ccc; border-radius: 8px; padding: 1rem; width: 300px;">
      
      <% if event.event_photo.attached? %>
        <%= image_tag event.event_photo, class: "card-img-top", style: "height: 200px; object-fit: cover;" %>
      <% else %>
        <%= image_tag "https://via.placeholder.com/400x300?text=No+Image", class: "card-img-top", style: "height: 200px; object-fit: cover;" %>
      <% end %>

      <h2>
        <%= link_to event.name, event_path(event), style: "text-decoration: none; color: inherit;" %>
      </h2>
      <p><strong>Category:</strong> <%= event.category %></p>
      <p><strong>Date:</strong> <%= event.start_date.strftime("%m/%d/%Y") %> to <%= event.end_date.strftime("%m/%d/%Y") %></p>
      <p><strong>Time:</strong> <%= event.start_time.strftime("%I:%M %p") %> - <%= event.end_time.strftime("%I:%M %p") %> 

      <% available_tickets = event.tickets.where(buyer_id: nil) %>
      <% if available_tickets.any? %>
        <%= link_to "View Tickets (#{available_tickets.count})", tickets_path(event_id: event.id), style: "display: inline-block; margin-top: 0.5rem; background: #007bff; color: white; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none;" %>
      <% else %>
        <p style="color: gray;">No tickets available</p>
      <% end %>

             
    </div>
  <% end %>
</div>
