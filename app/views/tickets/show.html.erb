<h1>Ticket Details</h1>

<p><strong>Price:</strong> $<%= @ticket.price %></p>
<p><strong>Seller:</strong> <%= @ticket.seller.name %></p>
<p><strong>Status:</strong> <%= @ticket.status %></p>

<% if @ticket.ticket_photo.attached? %>
  <div>
    <p><strong>Photo:</strong></p>
    <%= image_tag url_for(@ticket.ticket_photo.variant(resize_to_limit: [300, 300])) %>
  </div>
<% end %>

<% if user_signed_in? && @ticket.buyer.nil? && @ticket.seller != current_user %>
  <%= button_to "Buy Ticket", purchase_ticket_path(@ticket), method: :post, data: { turbo_confirm: "Are you sure you want to buy this ticket?" }, class: "btn btn-success" %>
<% elsif @ticket.buyer.present? %>
  <p><strong>Status:</strong> Sold</p>
<% elsif @ticket.seller == current_user %>
  <p><em>This is your own listing.</em></p>
<% end %>
